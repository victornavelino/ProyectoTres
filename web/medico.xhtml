<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:ui="http://java.sun.com/jsf/facelets"
                 template="./Templates/adminTemplate.xhtml"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:b="http://bootsfaces.net/ui"
                 >



    <ui:define name="content">
        
        

        <ui:include src="DomicilioDlg.xhtml"/>


        <!--Inicio Dialogo Usuario ABM -->

        <p:dialog id="dMedico"
                  widgetVar="dlgMedico"
                  closable="true" >

            <h3><h:outputText value="Datos de Profesional Medico"/></h3>
            <h:inputHidden value="#{medicoBean.medico.id}" />
            <h:inputHidden value="#{medicoBean.tipoOperacion}"/>
            <h:inputHidden value="#{medicoBean.bCamposSoloLectura}"/>

            <p:panel id="pPri" header="Datos Personales" >

                <h:panelGrid columns="2">

                    <p:outputLabel value="Nombre:" for="itNombre" />
                    <p:inputText id="itNombre" 
                                 value="#{personaBean.persona.nombre}"
                                 title="Nombre"
                                 size="50"
                                 maxlength="100"/>

                    <p:outputLabel value="Apellido:" for="itApellido" />
                    <p:inputText id="itApellido" 
                                 value="#{personaBean.persona.apellido}" 
                                 title="Apellido" 
                                 size="50"
                                 maxlength="100"/>


                    <p:outputLabel value="Cuil" for="itCuil" />
                    <p:inputMask id="itCuil"
                                 mask="99-99999999-9"
                                 value="#{personaBean.persona.cuil}" 
                                 title="Cuil" />

                    <p:outputLabel value="FechaNacimiento:" for="caFechaNacimiento" />
                    <p:calendar id="caFechaNacimiento" 
                                value="#{personaBean.persona.fechaNacimiento}" 
                                title="FechaNacimiento:" 
                                />
                    <p:outputLabel value="Matricula" for="imMatricula" />
                    <p:inputMask id="imMatricula" 
                                 value="#{medicoBean.medico.matriculaProfesional}" 
                                 title="Matricula"
                                 mask="9999"
                                 size="4"
                                 maxlength="4"/>

                </h:panelGrid>
                 <br></br>
                    <h:panelGrid columns="1" 
                                 width="720"
                                 >

                        <p:panel header="Domicilio"
                                 style="height: 180px;width: 600px">
                            <h:panelGrid columns="2" width="550">
                                <p:commandButton id="btnDomicilioMedico" 
                                                 value="Cargar Datos"
                                                 oncomplete="PF('dgDomicilio').show();"
                                                 actionListener="#{domicilioBean.definirActionBoton}"
                                                 icon="ui-icon-disk"
                                                 >
                                    <f:setPropertyActionListener value="#{domicilioBean.domicilio}" target="#{domicilioBean.domicilio}"/> 

                                </p:commandButton> 

                                <p:panel id="pnDomicilio" >
                                    <h:outputText  value="Localidad:  "/>
                                    <h:outputText  value="#{domicilioBean.domicilio.localidad}"/> <br></br>
                                    <h:outputText  value="Barrio:  "/>
                                    <h:outputText  value="#{domicilioBean.domicilio.barrio}"/> <br></br>
                                    <h:outputText  value="Calle:  "/>
                                    <h:outputText  value="#{domicilioBean.domicilio.calle}"/><br></br>
                                    <h:outputText  value="Numero:  "/>
                                    <h:outputText  value="#{domicilioBean.domicilio.numero}"/><br></br>
                                </p:panel>
                            </h:panelGrid>
                        </p:panel>

                    </h:panelGrid>
                    <br></br> 
                        

                    

            </p:panel>
            <div style=" float: left;">
                <p:messages autoUpdate="true"/>
            </div>
            <div style="clear: both;"/>

            <div class="divboton">

                <p:commandButton id="btnAction"
                                 value=" " 
                                 actionListener="#{medicoBean.actionBtn}" 
                                 update=":frmPri:pPri, :frmPri:dtMedico, @this"
                                 binding="#{medicoBean.cbAction}"
                                 styleClass="boton"
                                 />


                <p:commandButton id="btnSalir"
                                 value="Salir"  
                                 actionListener="#{medicoBean.limpiar()}"
                                 oncomplete="PF('dlgMedico').hide()"
                                 icon="ui-icon-cancel"
                                 update=":frmPri:dMedico, :frmPri:dtMedico"
                                 styleClass="boton"/>

            </div>


        </p:dialog>

        <!--Fin  Dialogo Usuario ABM -->

        <!--TABLA NIVEL -->

        <h2> Profesionales Medicos</h2>


        <p>

            <p:commandButton id="cbCreate"
                             value="Nuevo" 
                             icon="ui-icon-circle-plus" 
                             oncomplete="PF('dlgMedico').show()"
                             actionListener="#{medicoBean.setBtnSelect}"
                             update=":frmPri:dtMedico, dMedico"
                             />
        </p> 

        <p:dataTable id="dtMedico"
                     value="#{listaMedicoBean.medicos}"
                     var="item"
                     style="overflow-x: auto;"
                     paginator="true"
                     rows="20"
                     >

            <p:column width="100">
                <p:commandButton id="cbEdit"
                                 title="Editar"
                                 icon="ui-icon-pencil" 
                                 update=":frmPri:dMedico"
                                 oncomplete="PF('dlgMedico').show();"
                                 actionListener="#{medicoBean.setBtnSelect}"
                                 process="@form">                    

                    <f:setPropertyActionListener value="#{item}" target="#{medicoBean.medico}"/> 

                </p:commandButton>

                <p:commandButton id="cbDelete"
                                 title="Eliminar"
                                 icon="ui-icon-circle-close" 
                                 update=":frmPri:dMedico"
                                 oncomplete="PF('dlgMedico').show();"
                                 actionListener="#{medicoBean.setBtnSelect}">
                    <f:setPropertyActionListener value="#{item}" target="#{medicoBean.medico}"/> 

                </p:commandButton>

            </p:column>
            <p:column 
                filterBy="#{item.persona.nombre}"
                style="word-wrap:break-word;">
                <f:facet name="header">
                    <h:outputText value="Nombre"/>
                </f:facet>
                <h:outputText value="#{item.persona.nombre}"/>
            </p:column>

            <p:column
                filterBy="#{item.persona.apellido}"
                style="word-wrap:break-word;">
                <f:facet name="header">
                    <h:outputText value="Apellido"/>
                </f:facet>
                <h:outputText value="#{item.persona.apellido}"/>
            </p:column>

            <p:column
                filterBy="#{item.matriculaProfesional}"
                style="word-wrap:break-word;">
                <f:facet name="header">
                    <h:outputText value="Matricula"/>
                </f:facet>
                <h:outputText value="#{item.matriculaProfesional}"/>
            </p:column>

        </p:dataTable>
    </ui:define>
</ui:composition>
